graph TD
    A[ユーザーのブラウザ] -- 1. ページリクエスト --> B{CDN / キャッシュサーバー}
    B -- 2. キャッシュに<br>存在しない / 期限切れ /<br>再検証リクエスト (max-age=0) --> C[オリジンサーバー]
    C -- 3. レスポンス (Cache-Control: max-age=600) --> B
    B -- 4. キャッシュに保存 (10分間有効) --> B
    B -- 5. コンテンツをブラウザに送信 --> A
    A -- 6. 再度同じページをリクエスト<br>(10分以内、max-age=0なし) --> B
    B -- 7. キャッシュからコンテンツを送信<br>(キャッシュヒット) --> A
    A -- 8. 再度同じページをリクエスト<br>(10分経過後、またはmax-age=0あり) --> B
    B -- 9. オリジンサーバーに<br>コンテンツの更新を確認 --> C
    C -- 10. 更新なし (304 Not Modified)<br>または更新あり (新しいコンテンツ) --> B
    B -- 11. ブラウザに送信 (キャッシュを再利用/更新) --> A